:root {
    --bg-dark: #121212;
    --panel-bg: #1e1e24;
    --input-bg: #2b2b36;
    --gold: #c5a059;
    --text: #e0e0e0;
    --text-muted: #888;
    --radius: 12px;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body { 
    background: var(--bg-dark); 
    color: var(--text); 
    font-family: 'Roboto Condensed', sans-serif; 
    padding: 20px; 
    display: flex; 
    justify-content: center; 
}

/* CONTROLS */
.controls { position: fixed; top: 20px; right: 20px; z-index: 100; display: flex; flex-direction: column; gap: 10px; }
.btn-save, .btn-load { background: var(--gold); border: none; padding: 10px; cursor: pointer; font-weight: bold; border-radius: 8px; }

/* MAIN CONTAINER */
.sheet-container { width: 100%; max-width: 1100px; display: flex; flex-direction: column; gap: 40px; }
.sheet-page { background: var(--panel-bg); padding: 30px; border: 2px solid var(--gold); box-shadow: 0 0 20px rgba(0,0,0,0.5); position: relative; border-radius: 10px; }

/* INPUTS GERAIS */
input, textarea { background: var(--input-bg); border: none; color: var(--text); width: 100%; font-family: inherit; padding: 4px; border-bottom: 1px solid #444; border-radius: 4px; }
input:focus, textarea:focus { outline: none; border-bottom-color: var(--gold); background: #333; }
label { display: block; text-transform: uppercase; font-size: 0.65rem; color: var(--text-muted); font-weight: bold; text-align: center; margin-top: 4px; letter-spacing: 0.5px; }

/* HEADER */
.header-section { display: flex; gap: 20px; border-bottom: 2px solid var(--gold); padding-bottom: 20px; margin-bottom: 20px; }
.header-name { width: 30%; } 
.header-name input { font-size: 1.5rem; font-family: 'Cinzel'; height: 50px; }
.header-meta { width: 70%; display: flex; flex-direction: column; gap: 10px; }
.meta-row { display: flex; gap: 10px; } .meta-box { flex: 1; }

/* === LAYOUT GRID === */
.main-grid { 
    display: grid; 
    grid-template-columns: 1fr 1fr 1fr; 
    gap: 20px; 
    align-items: start; 
}

/* --- COLUNA ESQUERDA --- */
.col-left { display: flex; flex-direction: column; gap: 15px; }

.attributes-stack { background: rgba(0,0,0,0.2); padding: 10px; border-radius: var(--radius); }
.attr-box { display: flex; flex-direction: column; align-items: center; margin-bottom: 10px; position: relative; border: 1px solid #444; border-radius: var(--radius); padding: 5px; }
.mod-big { font-size: 1.8rem; text-align: center; height: 50px; border: none; background: transparent; }
.score-small { width: 40px; text-align: center; border-radius: 15px; border: 1px solid #444; position: absolute; bottom: -12px; background: var(--panel-bg); font-size: 0.8rem; height: 24px; z-index: 2; padding: 2px; }

.insp-prof { display: flex; gap: 5px; margin-bottom: 10px; }
.mini-box { border: 1px solid #444; padding: 5px; border-radius: var(--radius); flex: 1; }
.mini-box input { text-align: center; font-size: 1.2rem; }

/* CORREÇÃO DAS PERÍCIAS/SALVAGUARDAS (Esquerda/Direita) */
.list-box { border: 1px solid #444; padding: 10px; margin-bottom: 10px; border-radius: var(--radius); }
.list-row { 
    display: flex; 
    align-items: center; 
    font-size: 0.75rem; 
    margin-bottom: 8px; /* Mais espaço entre linhas */
    width: 100%;
}
/* Checkbox e Bônus ficam na esquerda */
.list-row input[type="checkbox"] { width: auto; margin-right: 8px; cursor: pointer; }
.bonus-input { width: 30px; text-align: center; margin-right: 10px; border: none; border-bottom: 1px solid #555; font-size: 0.8rem; flex-shrink: 0; }
/* Nome vai para a direita */
.list-row span { 
    text-align: right; 
    flex-grow: 1; /* Ocupa todo o espaço restante */
    white-space: nowrap; /* Não quebra linha (ex: Acrobatics (Dex)) */
    overflow: visible;
}

.prof-lang-box textarea { height: 150px; border-radius: var(--radius); }

.passive-perc { border: 1px solid #444; padding: 10px; border-radius: 50px; display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
.passive-perc input { width: 50px; height: 40px; text-align: center; border-radius: 50%; font-size: 1.2rem; border: 1px solid var(--gold); }

/* --- COLUNA CENTRAL --- */
.col-center { display: flex; flex-direction: column; gap: 15px; }

.combat-header { display: flex; gap: 10px; justify-content: space-between; background: rgba(0,0,0,0.2); padding: 10px; border-radius: var(--radius); }
.shield-box { flex: 1; text-align: center; display: flex; flex-direction: column; justify-content: space-between; } 
.shield-box input { font-size: 1.5rem; text-align: center; background: transparent; border: 2px solid #444; border-radius: 15px; padding: 10px; color: var(--gold); }

.hp-block, .hp-temp-block { border: 1px solid #444; padding: 10px; border-radius: var(--radius); background: rgba(0,0,0,0.2); }
.big-hp-input { font-size: 2rem; text-align: center; height: 60px; border: none; background: transparent; }
.hp-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
.line-input { width: 60px; text-align: center; }

.dice-death-row { display: flex; gap: 10px; margin-bottom: 10px; align-items: stretch; } 
.hit-dice-box, .death-saves-box { flex: 1; border: 1px solid #444; padding: 10px; border-radius: var(--radius); display: flex; flex-direction: column; justify-content: space-between; }
.big-dice-input { font-size: 1.5rem; text-align: center; border: none; background: transparent; width: 100%; margin: 10px 0; }
.ds-line { display: flex; align-items: center; justify-content: flex-end; gap: 5px; font-size: 0.7rem; margin-bottom: 5px; }

.attacks-section { border: 1px solid #444; padding: 10px; border-radius: var(--radius); background: rgba(0,0,0,0.1); }
.attacks-table-header { display: flex; font-size: 0.6rem; color: var(--text-muted); font-weight: bold; gap: 5px; padding-bottom: 5px; margin-bottom: 5px; border-bottom: 1px solid #333; }
.attack-row { display: flex; gap: 5px; margin-bottom: 5px; }
.atk-input, .atk-input-center { padding: 5px; font-size: 0.8rem; background: rgba(255,255,255,0.05); border-radius: 4px; }
.atk-input { flex: 2; } .atk-input-center { flex: 1; text-align: center; }
#attacks_text { height: 200px; font-size: 0.8rem; margin-top: 5px; border-radius: 8px; }

.equipment-box { display: flex; gap: 5px; border: 1px solid #444; padding: 5px; border-radius: var(--radius); }
.currency-col { width: 50px; display: flex; flex-direction: column; gap: 4px; }
.coin { display: flex; flex-direction: column; align-items: center; background: black; padding: 3px; border-radius: 8px; border: 1px solid #333; }
.coin span { font-size: 0.5rem; color: var(--gold); }
.coin input { padding: 0; text-align: center; font-size: 0.8rem; border: none; background: transparent; width: 100%; }
.equip-text textarea { height: 300px; border-radius: 8px; }

/* --- COLUNA DIREITA --- */
.col-right { display: flex; flex-direction: column; gap: 15px; height: 100%; }
.traits-container { background: rgba(0,0,0,0.2); padding: 10px; border-radius: var(--radius); display: flex; flex-direction: column; gap: 10px; }
.trait-small textarea { height: 100px; font-size: 0.85rem; border-radius: 8px; }
.features-box { flex-grow: 1; border: 1px solid #444; border-radius: var(--radius); padding: 5px; display: flex; flex-direction: column; }
.features-box textarea { flex-grow: 1; height: 100%; min-height: 400px; padding: 10px; border-radius: 8px; }

/* PAGE 2 & 3 */
.bio-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 10px; padding-bottom: 20px; border-bottom: 1px solid #444; margin-bottom: 20px; }
.page2-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.img-placeholder { height: 200px; border: 2px dashed #444; border-radius: var(--radius); display: flex; align-items: center; justify-content: center; margin-bottom: 20px; }
.backstory-box textarea, .allies-box textarea, .treasure-box textarea { height: 400px; border-radius: var(--radius); }

.spell-header { display: flex; gap: 10px; border: 2px solid var(--gold); padding: 15px; border-radius: var(--radius); margin-bottom: 20px; background: var(--panel-bg); }
.spell-meta { flex: 1; border: 1px solid #444; padding: 5px; border-radius: 8px; text-align: center; }
.spells-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; }
.spell-level-box { border: 1px solid #444; border-radius: var(--radius); overflow: hidden; }
.lvl-header { background: #333; color: var(--gold); padding: 5px; display: flex; justify-content: space-between; align-items: center; font-family: 'Cinzel'; }
.slots input { width: 35px; text-align: center; border: 1px solid #555; border-radius: 4px; }

/* CORREÇÃO DAS MAGIAS */
.spell-row { display: flex; align-items: center; border-bottom: 1px solid #333; padding: 4px; }
/* Checkbox com tamanho fixo */
.spell-row input[type="checkbox"] { width: auto; margin-right: 10px; accent-color: var(--gold); cursor: pointer; flex-shrink: 0; }
/* Texto da magia ocupa o resto, largura auto para não quebrar */
.spell-row input[type="text"] { font-size: 0.9rem; padding: 2px; flex-grow: 1; width: auto; }